sudo: required
services:
  - docker
language: go
go_import_path: github.com/jtblin/kube2iam
go:
 - 1.8

before_install:
  - go get -v github.com/Masterminds/glide
  - glide install -v

script:
 - make setup
 - make docker
after_success:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then
      docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
      make ;
    fi
